{"version":3,"sources":["components/Screen.tsx","components/ActionButtons.tsx","components/CrossPad.tsx","components/Connection.tsx","routes/Full.tsx","routes/Screen.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["SCREEN_WIDTH","SCREEN_HEIGHT","Screen","props","canvas","useRef","drawPlaceholder","a","current","ws","ctx","getContext","Math","random","fillStyle","fillRect","setTimeout","useEffect","onmessage","e","data","Blob","type","img","document","createElement","url","window","URL","webkitURL","createObjectURL","onload","drawImage","src","Container","ScreenBorders","width","height","ref","DisplayPlaceholder","styled","div","ActionButtonsPanel","ButtonKind","Button","kind","onUp","console","log","onDown","b","BUTTON_DIAMETER","BUTTON_MARGIN","ButtonContainer","onMouseDown","onMouseUp","button","PAD_BRANCH_WIDTH","PAD_BRANCH_LENGTH","CrossPad","VerticalBranch","isTop","HorizontalBranch","isLeft","CenterNode","Pad","Branch","Connection","useState","text","setText","value","onChange","target","onClick","ip","socket","WebSocket","binaryType","onopen","send","onerror","onclose","onConnection","handleConnection","Full","screenWs","setScreenWs","ControlContainer","ActionButtons","PREFIX","App","className","Body","path","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1123ace0.chunk.js","sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\n\nconst SCREEN_WIDTH = 240;\nconst SCREEN_HEIGHT = 160;\nconst SCREEN_BORDER = 32;\n\ninterface IScreen {\n  ws: WebSocket | null;\n}\n\nfunction Screen(props: IScreen) {\n  const canvas = useRef<null | HTMLCanvasElement>(null);\n\n  const drawPlaceholder = async () => {\n    if (canvas.current === null || props.ws !== null) return;\n\n    const ctx = canvas.current.getContext(\"2d\");\n    if (ctx === null) return;\n    if (Math.random() > 0.5) {\n      ctx.fillStyle = \"#6b6b8c\";\n    } else {\n      ctx.fillStyle = \"#c8cad5\";\n    }\n\n    ctx.fillRect(0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\n    setTimeout(drawPlaceholder, 200);\n  };\n\n  useEffect(() => {\n    if (props.ws === null) {\n      //drawPlaceholder();\n    } else {\n      props.ws.onmessage = (e) => {\n        if (canvas && canvas.current) {\n          const data = new Blob([e.data], { type: \"image/jpeg\" });\n          const img = document.createElement(\"img\");\n          const urlCreator = window.URL || window.webkitURL;\n          const url = urlCreator.createObjectURL(data);\n          const ctx = canvas.current.getContext(\"2d\");\n          img.onload = () => {\n            ctx?.drawImage(img, 0, 0, SCREEN_WIDTH, SCREEN_HEIGHT);\n          };\n          img.src = url;\n        }\n      };\n    }\n  }, [canvas, drawPlaceholder, props.ws]);\n\n  return (\n    <Container>\n      <ScreenBorders>\n        {canvas ? (\n          <canvas width={SCREEN_WIDTH} height={SCREEN_HEIGHT} ref={canvas} />\n        ) : (\n          <>\n            <canvas width={0} height={0} ref={canvas} />\n            <DisplayPlaceholder />\n          </>\n        )}\n      </ScreenBorders>\n    </Container>\n  );\n}\n\nexport default Screen;\n\nconst Container = styled.div``;\n\nconst ScreenBorders = styled.div`\n  max-width: ${SCREEN_WIDTH + SCREEN_BORDER}px;\n  min-width: ${SCREEN_WIDTH + SCREEN_BORDER}px;\n  max-height: ${SCREEN_HEIGHT + SCREEN_BORDER}px;\n  min-height: ${SCREEN_HEIGHT + SCREEN_BORDER}px;\n  background-color: #1c1c24;\n  border-radius: 10px;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst DisplayPlaceholder = styled.div`\n  max-width: ${SCREEN_WIDTH}px;\n  min-width: ${SCREEN_WIDTH}px;\n  max-height: ${SCREEN_HEIGHT}px;\n  min-height: ${SCREEN_HEIGHT}px;\n  background-color: #c8cad5;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nexport default ActionButtonsPanel;\n\nconst BUTTON_DIAMETER = 40;\nconst BUTTON_MARGIN = 24;\nconst PANEL_WIDTH = 2 * BUTTON_MARGIN + 2 * BUTTON_DIAMETER;\nconst PANEL_HEIGHT = 2 * BUTTON_MARGIN + 2 * BUTTON_DIAMETER;\n\nenum ButtonKind {\n  a = \"A\",\n  b = \"B\",\n}\n\ninterface IActionButtons {}\n\nfunction ActionButtonsPanel(props: IActionButtons) {\n  return (\n    <Container>\n      <Button\n        kind={ButtonKind.a}\n        onUp={() => console.log(\"A up\")}\n        onDown={() => console.log(\"A down\")}\n      />\n      <Button\n        kind={ButtonKind.b}\n        onUp={() => console.log(\"B up\")}\n        onDown={() => console.log(\"B down\")}\n      />\n    </Container>\n  );\n}\n\nconst Container = styled.div`\n  height: ${PANEL_HEIGHT}px;\n  width: ${PANEL_WIDTH}px;\n  position: relative;\n`;\n\ninterface IButtonProps {\n  kind: ButtonKind;\n  onUp: () => void;\n  onDown: () => void;\n}\n\nfunction Button(props: IButtonProps) {\n  return (\n    <ButtonContainer\n      kind={props.kind}\n      onMouseDown={props.onDown}\n      onMouseUp={props.onUp}\n    >\n      <span>{props.kind}</span>\n    </ButtonContainer>\n  );\n}\n\nconst ButtonContainer = styled.button<{ kind: ButtonKind }>`\n  background-color: #c8cad5;\n  height: ${BUTTON_DIAMETER}px;\n  width: ${BUTTON_DIAMETER}px;\n  border-radius: ${BUTTON_DIAMETER}px;\n  border: 0;\n  display: flex;\n  justify-content: center;\n  position: absolute;\n  top: ${(props) =>\n    props.kind === ButtonKind.a\n      ? `${BUTTON_MARGIN}px`\n      : `${BUTTON_MARGIN + BUTTON_DIAMETER}px`};\n  left: ${(props) =>\n    props.kind === ButtonKind.a\n      ? `${BUTTON_MARGIN + BUTTON_DIAMETER}px`\n      : `${BUTTON_MARGIN}px`};\n\n  span {\n    margin: auto;\n  }\n\n  :active {\n    filter: brightness(85%);\n  }\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst PAD_BRANCH_WIDTH = 32;\nconst PAD_BRANCH_LENGTH = 48;\nconst PAD_RADIUS = 8;\n\ninterface ICrossPad {}\n\nfunction CrossPad(props: ICrossPad) {\n  return (\n    <Container>\n      <VerticalBranch\n        isTop={true}\n        onMouseUp={() => console.log(\"up up\")}\n        onMouseDown={() => console.log(\"up down\")}\n      />\n      <VerticalBranch\n        isTop={false}\n        onMouseUp={() => console.log(\"down up\")}\n        onMouseDown={() => console.log(\"down down\")}\n      />\n      <HorizontalBranch\n        isLeft={true}\n        onMouseUp={() => console.log(\"left up\")}\n        onMouseDown={() => console.log(\"left down\")}\n      />\n      <HorizontalBranch\n        isLeft={false}\n        onMouseUp={() => console.log(\"right up\")}\n        onMouseDown={() => console.log(\"right down\")}\n      />\n      <CenterNode />\n    </Container>\n  );\n}\n\nexport default CrossPad;\n\nconst Container = styled.div`\n  height: ${2 * PAD_BRANCH_LENGTH + PAD_BRANCH_WIDTH}px;\n  width: ${2 * PAD_BRANCH_LENGTH + PAD_BRANCH_WIDTH}px;\n  position: relative;\n`;\n\nconst Pad = styled.div`\n  background-color: #c8cad5;\n`;\n\nconst CenterNode = styled(Pad)`\n  height: ${PAD_BRANCH_WIDTH}px;\n  width: ${PAD_BRANCH_WIDTH}px;\n  position: absolute;\n  top: ${PAD_BRANCH_LENGTH}px;\n  left: ${PAD_BRANCH_LENGTH}px;\n`;\n\nconst Branch = styled(Pad)`\n  :active {\n    filter: brightness(85%);\n  }\n`;\n\nconst VerticalBranch = styled(Branch)<{ isTop: boolean }>`\n  height: ${PAD_BRANCH_LENGTH}px;\n  width: ${PAD_BRANCH_WIDTH}px;\n  position: absolute;\n  ${(props) =>\n    props.isTop\n      ? `\n      top: O;\n      border-radius: ${PAD_RADIUS}px ${PAD_RADIUS}px 0 0;\n      `\n      : `\n      bottom: 0;\n      border-radius: 0 0 ${PAD_RADIUS}px ${PAD_RADIUS}px;\n      `}\n  left: ${PAD_BRANCH_LENGTH}px;\n`;\n\nconst HorizontalBranch = styled(Branch)<{ isLeft: boolean }>`\n  height: ${PAD_BRANCH_WIDTH}px;\n  width: ${PAD_BRANCH_LENGTH}px;\n  position: absolute;\n  ${(props) =>\n    props.isLeft\n      ? `\n        left: O;\n        border-radius:  ${PAD_RADIUS}px 0 0 ${PAD_RADIUS}px;\n        `\n      : `\n      right: 0;\n      border-radius: 0 ${PAD_RADIUS}px ${PAD_RADIUS}px 0;\n      `}\n  top: ${PAD_BRANCH_LENGTH}px;\n`;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\ninterface IConnection {\n  onConnection: (ws: WebSocket) => void;\n  type: \"screen\" | \"input\";\n}\n\nfunction Connection(props: IConnection) {\n  const [text, setText] = useState(\"\");\n\n  const handleConnection = (ip: string) => {\n    const socket = new WebSocket(`ws://${ip}`);\n    socket.binaryType = \"arraybuffer\";\n    socket.onopen = () => {\n      console.log(\"Conn open\");\n      socket.send(props.type);\n    };\n    socket.onerror = (e) => {\n      console.log(e);\n    };\n    socket.onclose = () => {\n      console.log(\"Conn closed\");\n    };\n    props.onConnection(socket);\n  };\n\n  return (\n    <Container>\n      <input\n        type=\"text\"\n        value={text}\n        onChange={(e) => setText(e.target.value)}\n      />\n      <button onClick={() => handleConnection(text)}>Connect</button>\n    </Container>\n  );\n}\n\nexport default Connection;\n\nconst Container = styled.div`\n  margin: 32px;\n`;\n","import React, { useState } from \"react\";\nimport styled from \"styled-components\";\n\nimport Screen from \"../components/Screen\";\nimport ActionButtonsPanel from \"../components/ActionButtons\";\nimport CrossPad from \"../components/CrossPad\";\nimport Connection from \"../components/Connection\";\n\nfunction Full() {\n  const [screenWs, setScreenWs] = useState<null | WebSocket>(null);\n\n  return (\n    <Container>\n      <Connection onConnection={(ws) => setScreenWs(ws)} type=\"screen\" />\n      <Screen ws={screenWs} />\n      <ControlContainer>\n        <CrossPad />\n        <ActionButtonsPanel />\n      </ControlContainer>\n    </Container>\n  );\n}\n\nexport default Full;\n\nconst Container = styled.div`\n  min-height: 100vh;\n  max-height: 100vh;\n  min-width: 100vw;\n  max-width: 100vw;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst ControlContainer = styled.div`\n  margin-top: 20px;\n  display: flex;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nimport ScreenComponent from \"../components/Screen\";\n\nfunction Screen() {\n  return (\n    <Container>\n      <ScreenComponent ws={null} />\n    </Container>\n  );\n}\n\nexport default Screen;\n\nconst Container = styled.div`\n  min-height: 100vh;\n  max-height: 100vh;\n  min-width: 100vw;\n  max-width: 100vw;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\";\n\nimport Full from \"./routes/Full\";\nimport Screen from \"./routes/Screen\";\n\nconst PREFIX = \"cloud-gba\";\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Body>\n        <Router>\n          <Switch>\n            <Route path=\"/full\">\n              <Full />\n            </Route>\n            <Route path={`${PREFIX}/full`}>\n              <Full />\n            </Route>\n            <Route path=\"/screen\">\n              <Screen />\n            </Route>\n            <Route path={`${PREFIX}/screen`}>\n              <Screen />\n            </Route>\n            <Route path=\"/\">\n              <Full />\n            </Route>\n          </Switch>\n        </Router>\n      </Body>\n    </div>\n  );\n}\n\nexport default App;\n\nconst Body = styled.div`\n  min-height: 100vh;\n  max-height: 100vh;\n  min-width: 100vw;\n  max-width: 100vw;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n\n  background-color: #675ea7;\n`;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}